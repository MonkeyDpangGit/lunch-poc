<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>登录成功-JWT</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.9.1.js"></script>
  <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
  <link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css">
  <style>
    .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default {
      border: 1px solid #d3d3d3;
      background: none;
      font-weight: normal;
      color: #555555;
    }

    .ui-accordion .ui-accordion-icons {
      padding-left: 2.2em;
      height: 40px;
      line-height: 40px;
    }

    p, li {
      font-size: 15px;
      color: darkgray;
    }
  </style>
  <script>
    $(function () {
      var icons = {
        header: "ui-icon-circle-arrow-e",
        activeHeader: "ui-icon-circle-arrow-s"
      };
      $("#accordion").accordion({
        icons: icons,
        heightStyle: "content"
      });
      $("#toggle").button().click(function () {
        if ($("#accordion").accordion("option", "icons")) {
          $("#accordion").accordion("option", "icons", null);
        } else {
          $("#accordion").accordion("option", "icons", icons);
        }
      });
    });
  </script>
</head>
<body>
<div style="width:1000px; position:absolute; left:50%; margin-left:-500px;">
  <div style="margin-bottom: 15px;margin-top: 15px;">
    <span><img src="images/ok.png" height="30" width="30"/></span>
    <span style="font-size: 28px;font-weight: bold;">登录成功</span>
  </div>
  <div id="accordion">
    <h3>步骤1：获取id_token</h3>
    <div>
      <p>
        获取url中id_token参数值。
      </p>
    </div>
    <h3>步骤2：验证id_token</h3>
    <div>
      <p>
        使用各种语言的jose api，验证JWT格式的id_token，包括验证签名信息、有效时间。
      </p>
      <p>
      <ul>
        <li>java：<a href="https://github.com/topics/jose4j">https://github.com/topics/jose4j</a>
        </li>
        <li>python：<a href="https://github.com/mpdavis/python-jose">https://github.com/mpdavis/python-jose</a>
        </li>
        <li>go：<a href="https://github.com/go-jose/go-jose">https://github.com/go-jose/go-jose</a>
        </li>
      </ul>
      </p>
      <p>用于验证签名的公钥，可通过访问管理控制台“应用管理” -> 选定指定应用 -> 点击行操作“应用配置” -> “JWT PublicKey”获取。</p>
    </div>
    <h3>步骤3：获取id_token中的用户信息</h3>
    <div>
      <p>
        使用各种语言的jose api，解析并获取id_token中个属性（Cliams）。<br>
        可参考在线JWT解析工具：<a
          href="https://www.box3.cn/tools/jwt.html">https://www.box3.cn/tools/jwt.html</a>
      </p>
      <p>
        <span>解析结果示例</span><br>
        <span>Header：</span><br>
        <span>{</span>
        <span>'typ': 'JWT',</span><br>
        <span>'alg': 'HS256'</span>
        <span>}</span>
      </p>
      <p>
        <span>Payload：</span><br>
        <span>{</span><br>
        <span>"jti": "40q82EgYML2JoZbbIs-fXQ",</span><br>
        <span>"iat": 1626400001,</span>
        <span>"exp": 1626400601,</span><br>
        <span>"nbf": 1626399941,</span><br>
        <span>"iss": "IAM(tencent)",</span><br>
        <span>"sub": "iamadmin",</span><br>
        <span>"aud": "cf5c50f0-54ad-4c06-8f0c-02abe6b130a6",</span><br>
        <span>"secondaryAccount": "iamadmin",</span><br>
        <span>"subjectId": "fcd0f438-684d-48d9-911e-3303430fe52f"</span><br>
        <span>}</span>
      </p>
    </div>
  </div>
</div>

</body>
</html>
